<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Finalizar Compra</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  <header class="site-header">
    <div class="brand"><span class="logo-accent">Tecno</span>PUD <span class="link">LINK</span></div>
    <a href="index.html" class="btn-ghost">üè† Home</a>
    <div class="menu-toggle"><i class="fas fa-bars"></i></div>
  </header>

  <aside class="mobile-sidebar">
    <a href="#" class="close-btn"><i class="fas fa-times"></i></a>
    <nav>
      <ul>
        <li><a href="#">Produtos</a></li>
        <li><a href="#">Categorias</a></li>
        <li><a href="#">Sobre N√≥s</a></li>
        <li><a href="#">Ajuda</a></li>
      </ul>
    </nav>
  </aside>

  <main class="checkout-main">
    <section class="cart-section">
      <h2>Seu Carrinho</h2>
      <div id="cartItems"></div>
      <div class="cart-summary">
        <strong>Total: R$ <span id="cartTotal">0.00</span></strong>
      </div>
    </section>

    <section class="form-section">
      <h2>Dados do Cliente</h2>
      <form id="checkoutForm">
        <label>Nome completo<input name="name" required /></label>
        <label>Email<input name="email" type="email" required /></label>
        <label>Telefone<input name="phone" required /></label>
        <label>Endere√ßo<textarea name="address" rows="2" required></textarea></label>

        <h3>Forma de Pagamento</h3>
        <label><input type="radio" name="pay" value="pix" required /> PIX</label>
        <label><input type="radio" name="pay" value="cartao" /> Cart√£o</label>

        <div id="pixBox" class="pay-box" hidden>
          <p>Escaneie o QR Code para pagar:</p>
          <img src="imagens/qrcode-pix.png" alt="QR Code PIX" class="qrcode"/>
        </div>

        <div id="cardBox" class="pay-box" hidden>
          <label>N√∫mero do Cart√£o<input name="card" required /></label>
          <label>Validade<input name="validade" placeholder="MM/AA" required /></label>
          <label>CVV<input name="cvv" required /></label>
          <label>Parcelamento
            <select name="parcelas">
              <option>√Ä vista</option>
              <option>2x sem juros</option>
              <option>3x sem juros</option>
              <option>6x</option>
            </select>
          </label>
        </div>

        <button type="submit" class="btn-gold">Finalizar Compra</button>
      </form>
      <div id="orderSuccess" class="order-success" hidden>
        <h3>Compra finalizada!</h3>
        <p>Obrigado ‚Äî seus dados foram recebidos.</p>
      </div>
    </section>
  </main>

  <section class="contact-map-section">
    <div class="map-container">
        <h4>Mapa</h4>
        <div class="map-wrap">
          <iframe src="https://www.google.com/maps?q=Niter√≥i+RJ&output=embed" title="Localiza√ß√£o da loja"></iframe>
        </div>
      </div>
      
    <div class="contact-container">
        <h4>Contato</h4>
        <p><i class="fas fa-envelope"></i> email@tecnopud.link</p>
        <p><i class="fas fa-phone"></i> (00) 0000-0000</p>
    </div>
  </section>

  <footer class="site-footer">
    <div class="footer-grid">
    </div>
    <div class="copyright">TECNOPUD SINCE 2025</div>
  </footer>

  <script>
  let cart = JSON.parse(localStorage.getItem("cart")) || [];
  function saveCart(){localStorage.setItem("cart",JSON.stringify(cart));}
  function renderCart(){
    const div=document.getElementById("cartItems");
    div.innerHTML="";
    let total=0;
    if (cart.length === 0) {
      div.innerHTML = "<p>Seu carrinho est√° vazio.</p>";
    } else {
      cart.forEach(it=>{
        div.innerHTML+=`<p>${it.id} (x${it.qty})</p>`;
        total+=parseFloat(it.qty*250); // valor fict√≠cio
      });
    }
    document.getElementById("cartTotal").textContent=total.toFixed(2);
  }
  renderCart();

  const radios=document.querySelectorAll("input[name=pay]");
  radios.forEach(r=>r.addEventListener("change",()=>{
    document.getElementById("pixBox").hidden=r.value!=="pix";
    document.getElementById("cardBox").hidden=r.value!=="cartao";
  }));

  document.getElementById("checkoutForm").onsubmit=e=>{
    e.preventDefault();
    document.getElementById("orderSuccess").hidden=false;
    // Opcional: rolar para a mensagem de sucesso
    document.getElementById("orderSuccess").scrollIntoView({ behavior: 'smooth' });

    // Limpar o carrinho ap√≥s 3 segundos
    setTimeout(() => {
        cart = [];
        saveCart();
        renderCart();
        document.getElementById("orderSuccess").hidden = true;
        // Opcional: rolar para o topo
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }, 3000); // 3 segundos
  };

  // Fun√ß√µes para o menu hamb√∫rguer
  const menuToggle = document.querySelector('.menu-toggle');
  const sidebar = document.querySelector('.mobile-sidebar');
  const closeBtn = document.querySelector('.close-btn');

  menuToggle.addEventListener('click', () => {
    sidebar.classList.add('is-open');
  });

  closeBtn.addEventListener('click', () => {
    sidebar.classList.remove('is-open');
  });

  // Fecha o menu ao clicar fora dele
  document.addEventListener('click', (e) => {
    if (!sidebar.contains(e.target) && !menuToggle.contains(e.target)) {
      sidebar.classList.remove('is-open');
    }
  });

  </script>
</body>
</html>
